language: node_js

notifications:
    email:
        - aralejs@gmail.com

node_js:
  - 0.8

before_script:
  - git clone https://github.com/aralejs/liquidluck-theme-arale2.git ../liquidluck-theme-arale2
  - cp -r ../liquidluck-theme-arale2/static tests/
  - mkdir tests/templates
  - cp ../liquidluck-theme-arale2/templates/mocha-runner.html tests/templates/runner.html
  - cp -r ../liquidluck-theme-arale2/test-travis.js tests/
  - nohup node tests/test-travis.js &

install: 
  - npm install spm node-static swig mocha-phantomjs
  - spm install

script: mocha-phantomjs http://127.0.0.1:8000/tests/runner.html
